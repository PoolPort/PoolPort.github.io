<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>پکیج PoolPort : پکیج PoolPort</title>
        <meta name="description" content="مستندات پکیج PoolPort">

        <link href="/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/syntax.css">
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body class="rtl">

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <h4><a class=brand href="/">پکیج PoolPort</a>
    <small>مستندات پکیج PoolPort</small>
</h4>

                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <li><a href="/">صفحه نخست</a></li>
    
        
        

        
            
                <li class=nav-header>مستندات</li>
            
            <li data-order=""><a href="/doc/version-3.html">نسخه 3</a></li>
        
            
            <li data-order=""><a href="/doc/version-2.html">نسخه 2</a></li>
        
            
            <li data-order=""><a href="/doc/version-1.html">نسخه 1</a></li>
        
    
        
        

        
            
                <li class=nav-header>قسمت های دیگر</li>
            
            <li data-order=""><a href="/others/changelog.html">تغییرات پکیج</a></li>
        
    
        
        

        
    
        
        

        
    
        
        

        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

                    </div>

                    <div id=content class=span10>
                        <h1>پکیج PoolPort</h1>

<ul>
<li><a href="#what-is-poolport">PoolPort چیست؟</a></li>
<li><a href="#version-3">نسخه 3</a></li>
<li><a href="#gateway-lists">لیست درگاه‌ها</a></li>
<li><a href="#quick-start">راه‌اندازی سریع</a></li>
<li><a href="#developers">توسعه دهندگان</a></li>
</ul>

<p><a name="what-is-poolport"></a></p>

<h2>PoolPort چیست؟</h2>

<p>پکیج PoolPort یک پکیج Composer برای زبان PHP است و در تمام پروژه های PHP قابل استفاده است. این پکیج برای برقراری با درگاه های بانک های مختلف است. با استفاده از این پکیج میتوانید به تمام درگاه هایی که در این پکیج پشتیبانی میشوند با یک API یکسان دسترسی داشته باشید.</p>

<p><a name="version-3"></a></p>

<h2>نسخه 3</h2>

<p>این نسخه تغییرات زیادی نسبت به نسخه‌های پیشین داشته و استفاده از این نسخه بسیار راحت است.</p>

<p>هر خطایی که در پکیج مشاهده کردید لطفا در صفحه <a href="https://github.com/mohsen-shafiee/IPay/issues">Issues</a> ثبت کنید.</p>

<p>همچنین میتوانید در صفحه <a href="https://gitter.im/PoolPort/PoolPort">Gitter</a> در مورد این پکیج صحبت کنید.</p>

<p><a name="gateway-lists"></a></p>

<h2>لیست درگاه‌ها</h2>

<ul>
<li>بانک ملت <code>P_MELLAT</code></li>
<li>بانک ملی با عنوان سداد <code>P_SADAD</code></li>
<li>بانک صادرات <code>P_SADERAT</code></li>
<li>بانک پارسیان - <span style="color:red">تست نشده</span> <code>P_PARSIAN</code></li>
<li>بانک پاسارگاد - <span style="color:red">تست نشده</span> <code>P_PASARGAD</code></li>
<li>درگاه زرین پال <code>P_ZARINPAL</code></li>
<li>درگاه جهان‌پی <code>P_JAHANPAY</code></li>
<li>درگاه پی‌لاین <code>P_PAYLINE</code></li>
<li>درگاه ایران کیش <code>P_IRANKISH</code></li>
</ul>

<p><a name="quick-start"></a></p>

<h2>راه اندازی سریع</h2>

<p>در این بخش می‌توانید بسیار سریع پروژه خود را به درگاه متصل کنید.</p>

<h3>نصب</h3>

<p>دستور زیر را در ترمینال اجرا کنید تا PoolPort نسخه بتا نصب شود.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>composer require poolport/poolport:~v3
</code></pre></div>
<h3>تنظیمات پکیج</h3>

<p>فایلی با نام <code>poolport.php</code> را در کنار پوشه <code>vendor</code> ایجاد کرده و درون آن کدهای موجود در
<a href="https://github.com/PoolPort/PoolPort/blob/master/poolport-sample.php" target="_blank">این صفحه</a>
را قرار دهید.</p>

<p>تنظیمات واضح هستند. به هر درگاه‌یی که میخواهید متصل شوید، ابتدا تنظیمات آن را در این فایل پر کنید.</p>

<p>نکته: پس از اولین اجرای درست پکیج، حتما مقدار <code>create</code> در <code>database</code> را برابر <code>false</code> قرار دهید.</p>

<h3>نوشتن کدها</h3>

<p>خب کدهای زیر را در فایل منتقل کننده به درگاه قرار دهید.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">PoolPort\PoolPort</span><span class="p">;</span>

<span class="nv">$poolPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PoolPort</span><span class="p">(</span><span class="nx">PoolPort</span><span class="o">::</span><span class="na">P_MELLAT</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$refId</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ready</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">refId</span><span class="p">();</span>

    <span class="c1">// Your code here</span>

    <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><p>به جای <code>P_MELLAT</code> میتوانید
<a href="#gateway-lists">درگاه‌های دیگر</a>
را بنویسید.</p></li>
<li><p>در متد <code>set</code> می‌توانید هزینه را به ریال وارد کنید.</p></li>
</ul>

<p>کدهای زیر را نیز در فایل callback بنویسید.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">PoolPort\PoolPort</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$poolPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PoolPort</span><span class="p">;</span>
    <span class="nv">$trackingCode</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">verify</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">trackingCode</span><span class="p">();</span>
    <span class="nv">$refId</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">refId</span><span class="p">();</span>
    <span class="nv">$cardNumber</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">cardNumber</span><span class="p">();</span>

    <span class="c1">// Your code here</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>تبریک میگم. اگر تنظیمات را به درستی وارد کرده باشید و درگاه شما نیز درست باشد، با موفقیت به درگاه متصل شدید.</p>

<p>اطلاعات بیشتر در مورد API را می‌توانید در <a href="./doc/version-3.html">اینجا</a> مشاهده کنید.</p>

<p><a name="developers"></a></p>

<h2>توسعه دهندگان</h2>

<p>PoolPort یک پکیج متن باز است و ما از همکاری شما در توسعه این پکیج به شدت استقبال میکنیم. شما می‌توانید از یکی از راه‌های زیر به توسعه بیشتر این پکیج کمک کنید:</p>

<ul>
<li>نصب PoolPort و گزارش خطاها و پیشنهادات</li>
<li>بهبود مستندات پکیج</li>
<li>همکاری در نوشتن کدهای اصلی پکیج</li>
<li>پورت کردن PoolPort به سیستم‌های دیگر نظیر وردپرس</li>
</ul>

<h3>لیست توسعه دهندگان اصلی پکیج</h3>

<ul>
<li>محسن شفیعی <a href="https://github.com/m-jch">Github</a>, <a href="mailto:mohsen.sh12@hotmail.com">Email</a></li>
<li>رضا زارع <a href="https://github.com/Reza1607">Github</a>, <a href="mailto:rz.zare@gmail.com">Email</a></li>
<li><a href="https://github.com/PoolPort/PoolPort/graphs/contributors">و همه دوستانی که به ما در توسعه این پکیج کمک میکنند</a>.</li>
</ul>

                    </div>
                
            </div>

            

            <div class=row-fluid>
                <div id=footer class=span12>
                    مستندات برای <a href="https://github.com/PoolPort/PoolPort">پکیج PoolPort</a>

<div class="social text-center">
    <a href="https://github.com/PoolPort/PoolPort">Github</a> |
    <a href="https://packagist.org/packages/poolport/poolport">Packagist</a>
</div>

                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
    </body>
</html>
