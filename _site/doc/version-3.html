<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>پکیج PoolPort : نسخه 3</title>
        <meta name="description" content="مستندات پکیج PoolPort">

        <link href="/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/syntax.css">
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body class="rtl">

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <h4><a class=brand href="/">پکیج PoolPort</a>
    <small>مستندات پکیج PoolPort</small>
</h4>

                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <li><a href="/">صفحه نخست</a></li>
    
        
        

        
            
                <li class=nav-header>مستندات</li>
            
            <li data-order=""><a href="/doc/version-3.html">نسخه 3</a></li>
        
            
            <li data-order=""><a href="/doc/version-2.html">نسخه 2</a></li>
        
            
            <li data-order=""><a href="/doc/version-1.html">نسخه 1</a></li>
        
    
        
        

        
            
                <li class=nav-header>قسمت های دیگر</li>
            
            <li data-order=""><a href="/others/changelog.html">تغییرات پکیج</a></li>
        
    
        
        

        
    
        
        

        
    
        
        

        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

                    </div>

                    <div id=content class=span10>
                        <div class=page-header>
    <h1>نسخه 3
        <small>مستندات نسخه 3</small>
    </h1>
</div>

<ul>
<li><a href="#desc">توضیحات</a></li>
<li><a href="#config">فایل تنظیمات پکیج</a></li>
<li><a href="#connect">اتصال به درگاه</a></li>
<li><a href="#callback">برگشت به سایت</a></li>
</ul>

<p><a name="desc"></a></p>

<h3 id="توضیحات">توضیحات</h3>

<p>در نسخه شماره سه ما تغییرات خیلی زیادی داشتیم، از نام پکیج گرفته تا نحوه کار آن. در این نسخه نام پکیج از IPay به PoolPort تغییر کرد.
همچنین نحوه کار با درگاه‌ها بسیار ساده شده است، بطوریکه تنها با یک API یکسان می‌توانید به تمام درگاه‌های موجود در پکیج متصل شوید.
همچنین در این نسخه درگاه‌های جدیدی نیز به پکیج اضافه شده است.</p>

<p><a name="config"></a></p>

<h3 id="فایل-تنظیمات-پکیج">فایل تنظیمات پکیج</h3>

<p>در این فایل شما میتوانید تمام اطلاعات و تنظیمات مورد نیاز برای پکیج را وارد کنید. مسیر پیشفرض فایل در کنار پوشه <code>vendor</code> و با نام <code>poolport.php</code> است، اما شما میتوانید این فایل را در هر مسیری که میخواهید قرار بدهید و آدرس را در هنگام ساخت شی از کلاس به <code>PoolPort</code> بدهید.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">return</span> <span class="k">array</span><span class="p">(</span>

    <span class="c1">//-------------------------------</span>
    <span class="c1">// Timezone for insert dates in database</span>
    <span class="c1">// If you want PoolPort not set timezone, just leave it empty</span>
    <span class="c1">//--------------------------------</span>
    <span class="s1">&#39;timezone&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Asia/Tehran&#39;</span><span class="p">,</span>

    <span class="c1">//--------------------------------</span>
    <span class="c1">// Database configuration</span>
    <span class="c1">//--------------------------------</span>
    <span class="s1">&#39;database&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;host&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dbname&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;create&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>             <span class="c1">// For first time you must set this to true for create tables in database</span>
    <span class="p">),</span>

    <span class="c1">//--------------------------------</span>
    <span class="c1">// Zarinpal gateway</span>
    <span class="c1">//--------------------------------</span>
    <span class="s1">&#39;zarinpal&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;merchant-id&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&#39;</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span>         <span class="o">=&gt;</span> <span class="s1">&#39;zarin-gate&#39;</span><span class="p">,</span>                           <span class="c1">// Types: [zarin-gate || normal]</span>
        <span class="s1">&#39;callback-url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://www.example.org/result&#39;</span><span class="p">,</span>
        <span class="s1">&#39;server&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;germany&#39;</span><span class="p">,</span>                              <span class="c1">// Servers: [germany || iran]</span>
        <span class="s1">&#39;email&#39;</span>        <span class="o">=&gt;</span> <span class="s1">&#39;email@gmail.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;mobile&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;09xxxxxxxxx&#39;</span><span class="p">,</span>
        <span class="s1">&#39;description&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span>
    <span class="p">),</span>

    <span class="c1">//--------------------------------</span>
    <span class="c1">// Mellat gateway</span>
    <span class="c1">//--------------------------------</span>
    <span class="s1">&#39;mellat&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;username&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;terminalId&#39;</span>   <span class="o">=&gt;</span> <span class="mo">0000000</span><span class="p">,</span>
        <span class="s1">&#39;callback-url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://www.example.org/result&#39;</span>
    <span class="p">),</span>

    <span class="c1">//--------------------------------</span>
    <span class="c1">// Payline gateway</span>
    <span class="c1">//--------------------------------</span>
    <span class="s1">&#39;payline&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;api&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;xxxxx-xxxxx-xxxxx-xxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39;</span><span class="p">,</span>
        <span class="s1">&#39;callback-url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://www.example.org/result&#39;</span>
    <span class="p">),</span>

    <span class="c1">//--------------------------------</span>
    <span class="c1">// Sadad gateway</span>
    <span class="c1">//--------------------------------</span>
    <span class="s1">&#39;sadad&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;merchant&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;transactionKey&#39;</span><span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;terminalId&#39;</span>    <span class="o">=&gt;</span> <span class="mo">000000000</span><span class="p">,</span>
        <span class="s1">&#39;callback-url&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;http://example.org/result&#39;</span>
    <span class="p">),</span>

    <span class="c1">//--------------------------------</span>
    <span class="c1">// JahanPay gateway</span>
    <span class="c1">//--------------------------------</span>
    <span class="s1">&#39;jahanpay&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;api&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;xxxxxxxxxxx&#39;</span><span class="p">,</span>
        <span class="s1">&#39;callback-url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://example.org/result&#39;</span>
    <span class="p">),</span>

    <span class="c1">//--------------------------------</span>
    <span class="c1">// Parsian gateway</span>
    <span class="c1">//--------------------------------</span>
    <span class="s1">&#39;parsian&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;pin&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;xxxxxxxxxxxxxxxxxxxx&#39;</span><span class="p">,</span>
        <span class="s1">&#39;callback-url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://example.org/result&#39;</span>
    <span class="p">),</span>
<span class="p">);</span>
</code></pre></div>
<ul>
<li><p>اگر میخواید <code>timezone</code> توسط PoolPort تنظیم شود، این مقدار را وارد کنید، در غیر اینصورت این مقدار را خالی رها کنید.</p></li>
<li><p>تنظیمات <code>database</code> برای اتصال به پایگاه داده است. در صورتی که قسمت <code>create</code> فعال (<code>true</code>) باشد، در هر بار استفاده از PoolPort، پکیج چک میکند که آیا جداول پکیج ایجاد شده است یا خیر، در صورتی که موجود نبودند، خود پکیج به صورت خودکار آنها را نصب میکند. پس توجه داشته باشید که در اولین استفاده از پکیج این گزینه را <code>true</code> کنید.</p></li>
<li><p>دیگر قسمت‌ها نیز مخصوص هر درگاه است، که در صورت استفاده از هر کدام از آنها، ابتدا تنظیمات آن‌ها را پر کنید.</p></li>
</ul>

<p><a name="connect"></a></p>

<h3 id="اتصال-به-درگاه">اتصال به درگاه</h3>

<p>تنها با استفاده از کد زیر میتوانید به درگاه مورد نظر متصل شوید:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">PoolPort\PoolPort</span><span class="p">;</span>

<span class="nv">$poolPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PoolPort</span><span class="p">(</span><span class="nx">PoolPort</span><span class="o">::</span><span class="na">P_MELLAT</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$refId</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ready</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">refId</span><span class="p">();</span>

    <span class="c1">// Your code here</span>

    <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><p>در کد بالا به درگاه بانک ملت متصل می‌شوید. برای متصل شدن به درگاه‌های دیگر باید مقدار پارامتر اول را در هنگام ساختن کلاس تغییر دهید:</p>

<ul>
<li>بانک ملت <code>P_MELLAT</code></li>
<li>بانک ملی با عنوان سداد <code>P_SADAD</code></li>
<li>بانک پارسیان - <span style="color:red">تست نشده</span> <code>P_PARSIAN</code></li>
<li>درگاه زرین پال <code>P_ZARINPAL</code></li>
<li>درگاه جهان‌پی <code>P_JAHANPAY</code></li>
<li>درگاه پی‌لاین <code>P_PAYLINE</code></li>
</ul></li>
<li><p>اگر فایل تنظیمات را در محل پیشفرض قرار ندادید میتوانید، آدرس آن را به عنوان پارامتر دوم در هنگام ساختن کلاس بدهید.</p></li>
</ul>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="nv">$poolPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PoolPort</span><span class="p">(</span><span class="nx">PoolPort</span><span class="o">::</span><span class="na">P_MELLAT</span><span class="p">,</span> <span class="s1">&#39;../../poolport.php&#39;</span><span class="p">);</span>
</code></pre></div>
<ul>
<li><p>با استفاده از متد <code>set</code> می‌توانید مقدار هزینه را به ریال وارد کنید. توجه کنید که در تمام درگاه‌ها این مقدار باید به ریال وارد شود.</p></li>
<li><p>پس از تنظیم هزینه باید متد <code>ready</code> را فراخوانی کنید. این متد چک می‌کند که آیا همه چیز برای متصل شدن به درگاه آماده است یا خیر.</p></li>
<li><p>پس از فراخوانی متد <code>ready</code> می‌توانید به درگاه <code>redirect</code> کنید. اما در کد بالا مشاهده می‌کنید که ما ابتدا مقدار <code>refId</code> را دریافت کرده و سپس به درگاه تغییر مسیر می‌دهیم. مقدار ref id یک مقداری است که هر درگاه برای هر عملیات پرداخت در نظر میگرد.</p></li>
<li><p>در صورت وقوع هر نوع خطا پکیج <code>Exception</code> برمیگرداند، به همین دلیل شما حتما باید کدهای مربوط به پکیج را در بلاک <code>{}try{}catch</code> قرار دهید.</p></li>
</ul>

<p><a name="callback"></a></p>

<h3 id="برگشت-به-سایت">برگشت به سایت</h3>

<p>بعد از برگشت کاربر به سایت، تنها با استفاده از کد زیر می‌توانید عملیات پرداخت را تایید کنید.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">PoolPort\PoolPort</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$poolPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PoolPort</span><span class="p">;</span>
    <span class="nv">$trackingCode</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">verify</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">trackingCode</span><span class="p">();</span>
    <span class="nv">$refId</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">refId</span><span class="p">();</span>
    <span class="nv">$cardNumber</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">cardNumber</span><span class="p">();</span>

    <span class="c1">// Your code here</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><p>برای تایید اینکه آیا کاربر مبلغ مورد نظر را پرداخت کرده است یا خیر، باید متد <code>verify</code> را فراخوانی کنید. در صورتی که کاربر مبلغ مورد نظر را پرداخت نکرده باشد، و یا هر نوع مشکلی در انجام تایید پرداخت بوجود آمده باشد، پکیج <code>Exception</code> برمی‌گرداند و مانع اجرا شدن کدهای بعدی خواهد شد.</p></li>
<li><p>متد <code>trackingCode</code> برای گرفتن شماره رهگیری است.</p></li>
<li><p>متد <code>refId</code> برای گرفتن مقدار ref id است.</p></li>
<li><p>متد <code>cartNumber</code> برای گرفتن شماره کارت کاربر است. توجه کنید که این متد در بعضی از درگاه‌ها به دلیل پشتیبانی نکردن درگاه، مقدار خالی برمی‌گرداند.</p></li>
</ul>

<h4 id="exceptions">Exceptions</h4>

<p>در زمان بازگشت کاربر به سایت، ممکن است Exception‌های مختلفی رخ بدهد:</p>

<ul>
<li>کاربر ممکن است برای دومین یا چندمین بار سعی بر ارسال داده از طرف بانک به سایت داشته باشد (<code>RetryException</code>)</li>
<li>ممکن است اطلاعات بازگشتی درست نباشد و در اینجا ممکن است چنین درگاه‌هی در سایت موجود نباشد (<code>PortNotFoundException</code>)</li>
<li>ممکن است اطلاعات بازگشتی به سایت درست نباشد و در اینجا ممکن است آدرس بازگشت به سایت اشتباه باشد (<code>InvalidRequestException</code>)</li>
<li>ممکن است اطلاعات بازگشتی به سایت درست نباشد و در اینجا ممکن است چنین رکورد پرداختی موجود نباشد. (<code>NotFoundTransactionException</code>)</li>
<li>ممکن است کاربر از انجام پرداخت منصرف شده باشد. (<code>Exception</code>)</li>
</ul>

<p>شما میتوانید تمام این Exceptionها را به صورت زیر Handle کنید:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">PoolPort\PoolPort</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PoolPort\Exceptions\RetryException</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PoolPort\Exceptions\PortNotFoundException</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PoolPort\Exceptions\InvalidRequestException</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PoolPort\Exceptions\NotFoundTransactionException</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$poolPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PoolPort</span><span class="p">;</span>
    <span class="nv">$trackingCode</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">verify</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">trackingCode</span><span class="p">();</span>
    <span class="nv">$refId</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">refId</span><span class="p">();</span>
    <span class="nv">$cardNumber</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">cardNumber</span><span class="p">();</span>

    <span class="c1">// Your code here</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">RetryException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;RetryException&#39;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">PortNotFoundException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;PortNotFoundException&#39;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">InvalidRequestException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;InvalidRequestException&#39;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">NotFoundTransactionException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;NotFoundTransactionException&#39;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="متد-setconfig">متد setConfig</h3>

<p>با استفاده از این متد می‌توانید تنظیمات درون فایل <code>poolport.php</code> را به ازای هر درخواست تغییر دهید.</p>

<p>برای مثال در کد زیر آدرس callback درگاه ملت را تغییر دادیم.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="nv">$poolPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PoolPort</span><span class="p">(</span><span class="nx">PoolPort</span><span class="o">::</span><span class="na">P_MELLAT</span><span class="p">);</span>
<span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">setConfig</span><span class="p">(</span><span class="s1">&#39;mellat.callback-url&#39;</span><span class="p">,</span> <span class="s1">&#39;another url&#39;</span><span class="p">);</span>
</code></pre></div>
<p>توجه کنید که استفاده از این متد برای تغییر تنظیمات <code>database</code> و <code>timezone</code> تاثیری ندارد.</p>

<h3 id="متد-transactionid">متد transactionId</h3>

<p>توسط این متد می‌توانید آی‌دی متناظر transaction را در جدول <code>poolport_transactions</code> بدست آورید.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="nv">$poolPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PoolPort</span><span class="p">(</span><span class="nx">PoolPort</span><span class="o">::</span><span class="na">P_MELLAT</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$refId</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ready</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">refId</span><span class="p">();</span>
    <span class="nv">$transactionId</span> <span class="o">=</span> <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">transactionId</span><span class="p">();</span>

    <span class="c1">// Your code here</span>

    <span class="nv">$poolPort</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

                    </div>
                
            </div>

            

            <div class=row-fluid>
                <div id=footer class=span12>
                    مستندات برای <a href="https://github.com/PoolPort/PoolPort">پکیج PoolPort</a>

<div class="social text-center">
    <a href="https://github.com/PoolPort/PoolPort">Github</a> |
    <a href="https://packagist.org/packages/poolport/poolport">Packagist</a>
</div>

                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
    </body>
</html>
